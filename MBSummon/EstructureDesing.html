<!DOCTYPE html>
<html lang="es en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MBSummon</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"rel="stylesheet"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="Style.css">
  </head>
<style>


</style>
    <!-- Pantalla de carga -->
    <div id="loadingScreen" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--card-bg,#fff);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;">
      <div class="loader"></div>
      <span id="loadingText" style="margin-top:20px;font-size:1.3em;color:var(--text-color,#333);font-weight:600;" data-i18n="common.loading">Cargando datos...</span>
    </div>
  <body>
    <div class="container">
      <div class="menu">
        <div class="menu-title">
          <span class="menu-text">MBSummon</span>
          <button class="menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
        </div>
        <button class="menu-button" id="homeButton">
          <i class="fas fa-home menu-icon"></i>
          <span data-i18n="menu.home">Inicio</span>
        </button>
        <button class="menu-button" id="languageButton">
          <i class="fas fa-language menu-icon"></i>
          <span data-i18n="menu.language">Idioma</span>
        </button>
        <button class="menu-button" id="themeButton">
          <i class="fas fa-moon menu-icon"></i>
          <span data-i18n="menu.theme">Oscuro</span>
        </button>
        <button class="menu-button" id="clearButton">
          <i class="fas fa-eraser menu-icon"></i>
          <span data-i18n="menu.clear">Limpiar</span>
        </button>
        <button class="menu-button" id="savedButton">
          <i class="fas fa-bookmark menu-icon"></i>
          <span data-i18n="menu.saved">Guardados</span>
        </button>
        <button class="menu-button" id="configButton">
          <i class="fas fa-cog menu-icon"></i>
          <span data-i18n="menu.settings">Configuración</span>
        </button>
      </div>
      <div class="mobile-header-bg"></div>

      <div class="topbar">
          <div class="mob-select-wrapper">
          <div class="box small" id="mobImage"></div>
          <select id="mobType" class="select-with-images" data-tag="mobType">
          </select>
        </div>
      </div>

      <div class="divider"></div>

      <div class="main">
        <!-- Grid de 3x3 para las cards, solo 9 cards -->
        <div class="card-grid">
          <div class="card" id="card1">
            <span class="question-icon">?</span>
            <i class="fas fa-signature"></i>
            <span class="card-text" data-i18n="cards.name">Nombre</span>
            <!-- inputs: #mobName -->
          </div>
          <div class="card-icon">
            <i class="fas fa-signature"></i>
          </div>
          <div class="card" id="card2">
            <span class="question-icon">?</span>
            <i class="fas fa-hashtag"></i>
            <span class="card-text" data-i18n="cards.amount">Cantidad</span>
            <!-- inputs: #mobAmount -->
          </div>
          <div class="card-icon">
            <i class="fas fa-hashtag"></i>
          </div>
          <div class="card" id="card3">
            <span class="question-icon">?</span>
            <i class="fas fa-location-dot"></i>
            <span class="card-text" data-i18n="cards.position">Posición</span>
            <!-- inputs: #positionType, #posX, #posY -->
          </div>
          <div class="card-icon">
            <i class="fas fa-location-dot"></i>
          </div>
          <div class="card" id="card9">
            <span class="question-icon">?</span>
            <i class="fas fa-heart"></i>
            <span class="card-text" data-i18n="cards.health">Vida</span>
            <!-- inputs: #mobHealth -->
          </div>
          <div class="card-icon">
            <i class="fas fa-heart"></i>
          </div>
          <div class="card" id="card4">
            <span class="question-icon">?</span>
            <i class="fas fa-hand-sparkles"></i>
            <span class="card-text" data-i18n="cards.holding">Objeto equip.</span>
            <!-- inputs: #itemSelect, #itemAmount, #itemData -->
          </div>
          <div class="card-icon">
            <i class="fas fa-hand-sparkles"></i>
          </div>
          <div class="card" id="card5">
            <span class="question-icon">?</span>
            <i class="fas fa-box"></i>
            <span class="card-text" data-i18n="cards.defaultLoot">Loot predet.</span>
            <!-- inputs: #toggleLoot -->
          </div>
          <div class="card-icon">
            <i class="fas fa-box"></i>
          </div>
          <div class="card" id="card6">
            <span class="question-icon">?</span>
            <i class="fas fa-shield"></i>
            <span class="card-text" data-i18n="cards.armor">Armadura</span>
            <!-- inputs: #helmetSelect, #chestplateSelect, #leggingsSelect, #bootsSelect -->
          </div>
          <div class="card-icon">
            <i class="fas fa-shield"></i>
          </div>
          <div class="card" id="card7">
            <span class="question-icon">?</span>
            <i class="fas fa-tags"></i>
            <span class="card-text" data-i18n="cards.lootTags">Loot Tags</span>
            <!-- inputs: #sidebarItemSelect (items), inside modal: amount, bonus, lootBonus, chance, onFire (toggle), size, isBaby (toggle), variant (select), isSheared (toggle), color -->
          </div>
          <div class="card-icon">
            <i class="fas fa-tags"></i>
          </div>
          <div class="card" id="cardAggressiveness">
            <span class="question-icon">?</span>
            <i class="fas fa-skull"></i>
            <span class="card-text" data-i18n="cards.aggressiveness">Agresividad</span>
            <!-- inputs: #aggressivenessSelect -->
          </div>
          <div class="card-icon">
            <i class="fas fa-skull"></i>
          </div>
          <div class="card" id="card10">
            <span class="question-icon">?</span>
            <i class="fas fa-wand-magic-sparkles"></i>
            <span class="card-text" data-i18n="cards.skinId">Skin ID</span>
            <!-- inputs: #skinId -->
          </div>
          <div class="card-icon">
            <i class="fas fa-wand-magic-sparkles"></i>
          </div>
          <div class="card" id="card18">
            <span class="question-icon">?</span>
            <i class="fas fa-cloud-bolt"></i>
            <span class="card-text" data-i18n="cards.charged">Creeper Cargado</span>
            <!-- inputs: #toggleCharged -->
          </div>
          <div class="card-icon">
            <i class="fas fa-cloud-bolt"></i>
          </div>
          <div class="card" id="card19">
            <span class="question-icon">?</span>
            <i class="fas fa-code"></i>
            <span class="card-text" data-i18n="cards.test">Test</span>
          </div>
          <div class="card-icon">
            <i class="fas fa-code"></i>
          </div>
          <div class="card" id="card15">
            <span class="question-icon">?</span>
            <i class="fas fa-baby"></i>
            <span class="card-text" data-i18n="cards.baby">Bebé</span>
            <!-- inputs: baby controls in babyPopup -->
          </div>
          <div class="card-icon">
            <i class="fas fa-baby"></i>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="customPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.name.title">Nombre del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="mobName" data-i18n="modals.name.label">Nombre personalizado:</label>
                <input type="text" id="mobName" class="popup-input" data-i18n="modals.name.placeholder" data-i18n-attr="placeholder" placeholder="Ingresa un nombre..." data-tag="name">
              </div>
              <button class="popup-button" id="statusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="helpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.name.help.title">Ayuda - Nombre del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.name.help.description">
              Esta opción te permite personalizar el nombre del mob que vas a invocar. El nombre que escribas aquí será visible flotando sobre el mob cuando lo invoques en el juego.
            </p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="amountPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.amount.title">Cantidad de mobs</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="mobAmount" data-i18n="modals.amount.label">Cantidad a invocar:</label>
                <input type="number" id="mobAmount" class="popup-input" 
                  data-i18n="modals.amount.placeholder" data-i18n-attr="placeholder"
                  placeholder="Ingresa una cantidad..." 
                  min="1" max="20" step="1" 
                  onkeypress="return event.charCode >= 48 && event.charCode <= 57" 
                  data-tag="quantity">
              </div>
              <button class="popup-button" id="amountStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="amountHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.amount.help.title">Ayuda - Cantidad de mobs</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.amount.help.description">
              Esta opción te permite definir cuántos mobs quieres invocar a la vez. Por razones de rendimiento y equilibrio del juego, el límite máximo es de 20 mobs por invocación.
            </p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="positionPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.position.title">Posición del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="positionType" data-i18n="modals.position.typeLabel">Tipo de posición:</label>
                <select id="positionType" class="popup-select">
                  <option value="" data-i18n="common.select">--Seleccionar tipo--</option>
                  <option value="relative" data-i18n="modals.position.relative">Posición relativa</option>
                  <option value="absolute" data-i18n="modals.position.absolute">Posición absoluta</option>
                </select>
              </div>
            </div>
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="posX" id="labelPosX" data-i18n="modals.position.coordX">Coordenada X:</label>
                <input type="number" id="posX" class="popup-input" data-i18n="modals.position.coordXPlaceholder" data-i18n-attr="placeholder" placeholder="Ingresa la coordenada X..." disabled>
              </div>
              <button class="popup-button" id="posXStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="posY" id="labelPosY" data-i18n="modals.position.coordY">Coordenada Y:</label>
                <input type="number" id="posY" class="popup-input" data-i18n="modals.position.coordYPlaceholder" data-i18n-attr="placeholder" placeholder="Ingresa la coordenada Y..." disabled>
              </div>
              <button class="popup-button" id="posYStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="positionHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.position.help.title">Ayuda - Posición del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.position.help.description">
              Esta opción te permite definir dónde aparecerá el mob. Puedes elegir entre posición relativa (respecto al jugador) o posición absoluta (coordenadas fijas del mundo). Ingresa los valores X e Y para determinar el punto exacto de aparición.
            </p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="itemPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.item.title">Objeto equipado</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="itemSelect" data-i18n="modals.item.label">Seleccionar objeto:</label>
                <select id="itemSelect" class="select-with-images" style="width: 100%" data-tag="holding">
                  <option value="" data-i18n="modals.item.selectPlaceholder">--Seleccionar objeto--</option>
                </select>
              </div>
              <button class="popup-button" id="itemStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="itemHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.item.help.title">Ayuda - Objeto equipado</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.item.help.description">
              Esta opción te permite seleccionar el objeto que el mob tendrá equipado en su mano. El objeto seleccionado aparecerá en la mano del mob cuando sea invocado.
            </p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="healthPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.health.title">Vida del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="mobHealth" data-i18n="modals.health.label">Cantidad de vida:</label>
                <input type="number" id="mobHealth" class="popup-input" data-i18n="modals.health.placeholder" data-i18n-attr="placeholder" placeholder="Ingresa la vida..." min="1" max="1000" step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" data-tag="health">
              </div>
              <button class="popup-button" id="healthStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
            <div id="healthHeartsWrapper" style="margin-top:12px; width:100%;">
              <div id="healthHearts" class="health-hearts" aria-live="polite"></div>
            </div>
            
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="healthHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.health.help.title">Ayuda - Vida del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.health.help.description">
              Esta opción te permite definir la cantidad de vida que tendrá el mob al aparecer. El valor debe estar entre 1 y 1000 puntos de vida.
            </p>
          </div>
        </div>
      </div>

      

      <div class="popup-overlay" id="lootHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.loot.help.title">Ayuda - Loot Predeterminado</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.loot.help.description">
              Esta opción te permite activar o desactivar el loot predeterminado del mob. Cuando está activado, el mob soltará los items que tiene configurados por defecto al morir.
            </p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="lootTagsPopup">
        <div class="popup-window loot-tags-window">
          <div class="popup-header">
            <h2>Loot Tags</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <!-- Header con selector de item y botón agregar -->
            <div class="loot-tags-header">
              <div class="add-item-header">
                <i class="fas fa-plus"></i>
              </div>
              <select id="sidebarItemSelect" class="select-with-images" style="width: 200px">
                <option value="" data-i18n="modals.lootTags.selectItemPlaceholder">Seleccionar item</option>
              </select>
            </div>

            <!-- Botones de acción (solo Agregar item bajo el select) -->
            <div class="loot-tags-buttons">
              <button class="sidebar-button save" data-i18n="modals.lootTags.saveButton">Guardar</button>
            </div>

            <!-- Divisor -->
            <div class="loot-tags-divider"></div>

            <!-- Contenedor de inputs de creación/edición con scroll -->
            <div class="loot-tags-container">
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.amount">Cantidad:</label>
                <input type="number" class="sidebar-input integer-only" min="1" max="64" step="1">
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.bonus">Bonus:</label>
                <input type="number" class="sidebar-input" min="0">
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.lootBonus">Loot Bonus:</label>
                <input type="number" class="sidebar-input" min="0">
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.chance">Oportunidad:</label>
                <input type="number" class="sidebar-input" min="0" max="100" step="0.1">
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.onFire">Está en llamas:</label>
                <button class="toggle-button">
                  <i class="fas fa-toggle-off"></i>
                  <span data-i18n="common.no">No</span>
                </button>
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.size">Tamaño:</label>
                <select class="sidebar-select" data-i18n-attr="">
                  <option value="" data-i18n="modals.lootTags.selectItemPlaceholder">--Seleccionar--</option>
                  <option value="1" data-i18n="modals.lootTags.sizeOptions.small">Pequeño</option>
                  <option value="2" data-i18n="modals.lootTags.sizeOptions.medium">Mediano</option>
                  <option value="3" data-i18n="modals.lootTags.sizeOptions.large">Grande</option>
                </select>
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.isBaby">Es bebé:</label>
                <button class="toggle-button">
                  <i class="fas fa-toggle-off"></i>
                  <span data-i18n="common.no">No</span>
                </button>
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.variant">Variante:</label>
                <select id="lootVariantSelect" class="sidebar-select select-with-images select-variant">
                  <option value="">--Seleccionar--</option>
                </select>
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.isSheared">Está esquilada:</label>
                <button class="toggle-button">
                  <i class="fas fa-toggle-off"></i>
                  <span data-i18n="common.no">No</span>
                </button>
              </div>
              
              <div class="loot-tags-item">
                <label data-i18n="modals.lootTags.fields.color">Color:</label>
                <select id="lootColorSelect" class="sidebar-select select-with-images select-color">
                  <option value="">--Seleccionar--</option>
                </select>
              </div>
            </div>

            <div class="loot-tags-divider"></div>

            <!-- Lista donde se mostrarán los items guardados -->
            <div class="loot-tags-saved-list" style="margin-top: 38px;" aria-live="polite"></div>

            <!-- Inline delete confirmation removed; using global #lootDeleteModal -->
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="lootTagsHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.lootTags.help.title">Ayuda - Loot Tags</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.lootTags.help.description">
              Esta opción te permite activar o desactivar los tags de loot del mob. Los tags controlan comportamientos especiales al morir el mob, como la posibilidad de soltar experiencia o items raros.
            </p>
          </div>
        </div>
      </div>

      <!-- Global delete confirmation modal for Loot Tags -->
      <div class="popup-overlay" id="lootDeleteModal">
        <div class="popup-window">
          <div class="popup-header">
            <h3>Eliminar Loot Tag</h3>
            <button class="popup-close" onclick="$('#lootDeleteModal').removeClass('show')">&times;</button>
          </div>
          <div class="popup-content">
            <p>¿Seguro que deseas eliminar este loot tag?</p>
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
              <button class="popup-button" id="cancelDeleteLoot">Cancelar</button>
              <button class="popup-button save-button" id="confirmDeleteLoot">Eliminar</button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="armorPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.armor.title">Armadura del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="helmetSelect" data-i18n="modals.armor.helmet">Casco:</label>
                <select id="helmetSelect" class="select-with-images" style="width: 100%" data-tag="armor">
                  <option value="">--Seleccionar--</option>
                </select>
              </div>
              <button class="popup-button" id="helmetStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="chestplateSelect" data-i18n="modals.armor.chestplate">Pechera:</label>
                <select id="chestplateSelect" class="select-with-images" style="width: 100%" data-tag="armor">
                  <option value="">--Seleccionar--</option>
                </select>
              </div>
              <button class="popup-button" id="chestplateStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="leggingsSelect" data-i18n="modals.armor.leggings">Pantalones:</label>
                <select id="leggingsSelect" class="select-with-images" style="width: 100%" data-tag="armor">
                  <option value="">--Seleccionar--</option>
                </select>
              </div>
              <button class="popup-button" id="leggingsStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="bootsSelect" data-i18n="modals.armor.boots">Botas:</label>
                <select id="bootsSelect" class="select-with-images" style="width: 100%" data-tag="armor">
                  <option value="">--Seleccionar--</option>
                </select>
              </div>
              <button class="popup-button" id="bootsStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="armorHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.armor.help.title">Ayuda - Armadura del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.armor.help.description">
              Esta opción te permite equipar al mob con diferentes piezas de armadura. Puedes seleccionar casco, pechera, pantalones y botas de diferentes materiales.
            </p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="aggressivenessPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.aggressiveness.title">Agresividad del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="aggressivenessSelect" data-i18n="modals.aggressiveness.label">Tipo de agresividad:</label>
                  <select id="aggressivenessSelect" class="popup-select" data-tag="aggro">
                    <option value="" data-i18n="common.select">--Seleccionar tipo--</option>
                    <option value="hostile" data-i18n="modals.aggressiveness.hostile">Hostil</option>
                    <option value="neutral" data-i18n="modals.aggressiveness.neutral">Neutral</option>
                    <option value="passive" data-i18n="modals.aggressiveness.passive">Pasivo</option>
                  </select>
              </div>
              <button class="popup-button" id="aggressivenessStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="aggressivenessHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.aggressiveness.help.title">Ayuda - Agresividad del mob</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.aggressiveness.help.description">
              Esta opción te permite definir el comportamiento agresivo del mob. Hostil atacará a los jugadores, Neutral solo atacará si es provocado, y Pasivo nunca atacará.
            </p>
          </div>
        </div>
      </div>
      
      <!-- Skin ID Popup -->
      <div class="popup-overlay" id="skinPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.skin.title">Skin ID</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="skinId" data-i18n="modals.skin.label">ID de skin (solo números):</label>
                <input type="text" id="skinId" class="popup-input" data-i18n="modals.skin.placeholder" data-i18n-attr="placeholder" placeholder="Ejemplo: 76198" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
              </div>
              <button class="popup-button" id="skinStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="skinHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.skin.help.title">Ayuda - Skin ID</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.skin.help.description">Ingresa el ID numérico de la skin que deseas asignar al mob. Solo se permiten números (ej: 76198). En el comando se añadirá como <code>skin:76198</code>.</p>
          </div>
        </div>
      </div>

      <!-- Creeper Cargado (Charged) Popup -->
      <div class="popup-overlay" id="lootPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.loot.title">Loot Predeterminado</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="defaultLoot" data-i18n="modals.loot.label">Activar loot predeterminado:</label>
                <button id="toggleLoot" class="popup-toggle-button" data-tag="defaultDrops">
                  <i class="fas fa-toggle-off"></i>
                  <span>Desactivado</span>
                </button>
              </div>
              <button class="popup-button" id="lootStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Charged Creeper Popup (Creeper Cargado) -->
      <div class="popup-overlay" id="chargedPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.charged.title">Creeper Cargado</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="popup-input-wrapper">
                <label for="toggleCharged" data-i18n="modals.charged.label">Creeper cargado:</label>
                <button id="toggleCharged" class="popup-toggle-button" data-tag="charged">
                  <i class="fas fa-toggle-off"></i>
                  <span data-i18n="modals.charged.disabled">Desactivado</span>
                </button>
              </div>
              <button class="popup-button" id="chargedStatusButton">
                <i class="fas fa-times status-icon not-saved"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="chargedHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.charged.help.title">Ayuda - Creeper Cargado</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.charged.help.description">Activa esta opción para convertir al creeper en una versión cargada. En el comando se añadirá <code>charged:1</code> cuando esté activado.</p>
          </div>
        </div>
      </div>

      <!-- Baby Card Popups -->
      <div class="popup-overlay" id="babyPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.baby.title">Bebé</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="popup-input-group">
              <div class="parent">
                <div class="div1">
                  <div class="popup-input-wrapper">
                    <label for="babyMode" data-i18n="modals.baby.modeLabel">Modo Bebé:</label>
                    <select id="babyMode" class="popup-select">
                      <option value="" data-i18n="common.select">--Seleccionar--</option>
                      <option value="always" data-i18n="modals.baby.option.always">Siempre</option>
                      <option value="time" data-i18n="modals.baby.option.time">Tiempo</option>
                    </select>
                  </div>
                </div>

                <div class="div2">
                  <div class="first-row-status">
                    <button class="popup-button" id="babyStatusButton">
                      <i class="fas fa-times status-icon not-saved"></i>
                    </button>
                  </div>
                </div>

                <div class="div3" id="babyRow">
                  <div class="popup-input-wrapper" id="babyTimeWrapper">
                    <label for="babyTimeInput" data-i18n="modals.baby.timeLabel">Tiempo (segundos):</label>
                    <input id="babyTimeInput" class="popup-select" type="number" min="0" placeholder="0" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="babyHelpPopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.baby.help.title">Ayuda - Bebé</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.baby.help.description">Configura cómo debe aparecer la variante bebé del mob. Elige "Siempre" para baby:true o "Tiempo" para especificar un número que aparecerá como baby:N en el comando.</p>
          </div>
        </div>
      </div>

      <div class="popup-overlay" id="languagePopup">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.language.title">Seleccionar Idioma</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="language-buttons">
<button class="language-btn active" data-lang="es">
  <img src="https://res.cloudinary.com/dnyoogvv1/image/upload/v1750881497/ES-es_vsqvgk.jpg" data-i18n="languages.es.alt" alt="Español">
  <span data-i18n="languages.es.name">Español</span>
</button>
<button class="language-btn" data-lang="en">
  <img src="https://res.cloudinary.com/dnyoogvv1/image/upload/v1750881497/EN-en_jr23vm.jpg" data-i18n="languages.en.alt" alt="English">
  <span data-i18n="languages.en.name">Inglés</span>
</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Modal (EXPORT / IMPORT only) -->
      <div class="popup-overlay" id="settingsModal">
        <div class="popup-window">
          <div class="popup-header">
            <h2 data-i18n="modals.settings.title">Settings</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <p class="popup-description" data-i18n="modals.settings.description">Configure your preferences for MBSummon.</p>

            <div class="settings-window">
              <div class="settings-cards">
                <div class="settings-card">
                  <div class="card-left">
                    <div class="card-icon"><i class="fas fa-file-export"></i></div>
                    <div class="card-body">
                      <div class="card-title" data-i18n="modals.settings.exportLabel">Export saved commands:</div>
                      <div class="card-desc" data-i18n="modals.settings.exportLabel">Export saved commands to a file</div>
                    </div>
                  </div>
                  <div class="card-actions">
                    <button id="settingsExport" class="popup-button save-button" data-i18n="modals.settings.exportButton">Export</button>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="card-left">
                    <div class="card-icon"><i class="fas fa-file-import"></i></div>
                    <div class="card-body">
                      <div class="card-title" data-i18n="modals.settings.importLabel">Import saved commands:</div>
                      <div class="card-desc" data-i18n="modals.settings.importLabel">Import saved commands from a JSON file</div>
                    </div>
                  </div>
                    <div class="card-actions" style="align-items:center;">
                      <input type="file" id="settingsImportInput" accept="application/json" style="display:none">
                      <button id="settingsImportButton" class="popup-button" data-i18n="modals.settings.importButton">Import</button>
                    </div>
                </div>
              </div>
            </div>
                <!-- filename display removed — notifications will show file info -->

            <div style="display:flex;gap:0.6rem;justify-content:flex-end;margin-top:1rem;">
            </div>
          </div>
        </div>
      </div>

      <!-- Guardados List Modal (solo lista) -->
      <div class="popup-overlay" id="savedListModal">
        <div class="popup-window saved-modal-window">
          <div class="popup-header">
            <h2 data-i18n="modals.savedModal.title">Guardados</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <div class="saved-modal-list" style="margin-top:1rem;">
              <p data-i18n="modals.savedModal.emptyMessage">No hay guardados aún.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Guardados Create Modal (formulario para nuevo guardado) -->
      <div class="popup-overlay" id="savedCreateModal">
        <div class="popup-window saved-modal-window">
          <div class="popup-header">
            <h2 data-i18n="modals.savedModal.createTitle">Guardar</h2>
            <button class="popup-close">&times;</button>
          </div>
          <div class="popup-content">
            <!-- Minimal saved command modal: only mob image, name input and action buttons -->
            <div class="saved-entry" style="display:flex;gap:1rem;align-items:center;">
              <div class="saved-mob-image box small" id="savedMobImage" style="width:72px;height:72px;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:10px;"></div>
              <div style="flex:1;">
                <label for="savedCommandName" data-i18n="modals.savedModal.nameLabel">Nombre:</label>
                <input type="text" id="savedCommandName" class="popup-input" placeholder="Ingresa un nombre..." data-i18n="modals.savedModal.namePlaceholder" data-i18n-attr="placeholder">
              </div>
            </div>

            <div class="saved-modal-actions" style="display:flex;gap:0.6rem;justify-content:flex-end;margin-top:1rem;">
              <button class="popup-button save-button" id="confirmSaveButton" data-i18n="modals.savedModal.saveButton">Guardar</button>
              <button class="popup-button" id="cancelSaveButton" data-i18n="modals.savedModal.cancelButton">Cancelar</button>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-divider"></div>
      <div class="footer">
        <div class="footer-box-big">
          <!-- El botón va aquí, antes del comando generado -->
          <button id="footerSaveButton" class="footer-save-btn" data-i18n="common.save" data-i18n-attr="title" title="Guardar" style="display:none;">
            <i class="fas fa-bookmark"></i>
          </button>
          <!-- El comando generado se inserta aquí por JS -->
        </div>
        <div class="footer-box">
          <i class="fas fa-copy"></i>
        </div>
      </div>
    </div>
  <script src="notifications.js"></script>
  <div id="notifContainer" class="notif-container" aria-live="polite"></div>
  <script src="Function.js"></script>
  <script src="lootTags.js"></script>
    <script>
      
    </script>
  </body>
</html>
